import{_ as t}from"./plugin-vueexport-helper.2444895f.js";import{o,c as p,a as n,b as s,d as c,e as a,r as l}from"./app.88f885e0.js";const i={},r=a(`<h1 id="scope-css" tabindex="-1"><a class="header-anchor" href="#scope-css" aria-hidden="true">#</a> Scope CSS</h1><p>\u5728 qiankun \u4E2D\u6709\u5982\u4E0B\u914D\u7F6E\u53EF\u4EE5\u8BBE\u7F6E\u5B50\u5E94\u7528\u7684\u6837\u5F0F\u9694\u79BB</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u542F\u52A8\u5E94\u7528</span>
<span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">sandbox</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">strictStyleIsolation</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token literal-property property">experimentalStyleIsolation</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),u=n("strong",null,"strictStyleIsolation\uFF1A",-1),d={href:"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_shadow_DOM",target:"_blank",rel:"noopener noreferrer"},k=n("li",null,[n("strong",null,"experimentalStyleIsolation\uFF1A"),s(" \u5F53 experimentalStyleIsolation \u88AB\u8BBE\u7F6E\u4E3A true \u65F6\uFF0Cqiankun \u4F1A\u6539\u5199\u5B50\u5E94\u7528\u6240\u6DFB\u52A0\u7684\u6837\u5F0F\u4E3A\u6240\u6709\u6837\u5F0F\u89C4\u5219\u589E\u52A0\u4E00\u4E2A\u7279\u6B8A\u7684\u9009\u62E9\u5668\u89C4\u5219\u6765\u9650\u5B9A\u5176\u5F71\u54CD\u8303\u56F4")],-1),v=a(`<h2 id="shadowdom" tabindex="-1"><a class="header-anchor" href="#shadowdom" aria-hidden="true">#</a> ShadowDOM</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">appContent</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token literal-property property">strictStyleIsolation</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
  <span class="token literal-property property">scopedCSS</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
  <span class="token literal-property property">appName</span><span class="token operator">:</span> string<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement <span class="token punctuation">{</span>

  <span class="token comment">// ...</span>
  <span class="token keyword">const</span> containerElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  containerElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> appContent<span class="token punctuation">;</span>
  <span class="token comment">// appContent always wrapped with a singular div</span>
  <span class="token keyword">const</span> appElement <span class="token operator">=</span> containerElement<span class="token punctuation">.</span>firstChild <span class="token keyword">as</span> HTMLElement<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strictStyleIsolation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>supportShadowDOM<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token string">&#39;[qiankun]: As current browser not support shadow dom, your strictStyleIsolation configuration will be ignored!&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> innerHTML <span class="token punctuation">}</span> <span class="token operator">=</span> appElement<span class="token punctuation">;</span>
      appElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> <span class="token literal-property property">shadow</span><span class="token operator">:</span> ShadowRoot<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>appElement<span class="token punctuation">.</span>attachShadow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        shadow <span class="token operator">=</span> appElement<span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;open&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// createShadowRoot was proposed in initial spec, which has then been deprecated</span>
        shadow <span class="token operator">=</span> <span class="token punctuation">(</span>appElement <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createShadowRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      shadow<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> innerHTML<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">return</span> appElement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>qiankun</code>\u5728\u8FD9\u65B9\u9762\u7684\u5B9E\u73B0\u5C31\u6BD4\u8F83\u7B80\u5355\u4E86\uFF0C\u5F53\u4E3A\u5B50\u5E94\u7528\u521B\u5EFA\u6839\u7ED3\u70B9\u65F6\uFF08\u914D\u7F6E strictStyleIsolation\uFF09, \u5C31\u4F1A\u4E3A\u8FD9\u4E2A\u8282\u70B9\u521B\u5EFA<code>ShadowDOM</code>\u3002 \u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\uFF0C\u6709\u4E24\u79CD\u521B\u5EFA<code>ShadowDOM</code>\u7684\u65B9\u5F0F\uFF0C<code>attachShadow</code>\u548C<code>createShadowRoot</code>\uFF0C<code>createShadowRoot</code>\u5DF2\u7ECF\u88AB\u5E9F\u5F03\uFF0C\u53EF\u4EE5\u4F5C\u4E3A\u964D\u7EA7\u7684\u65B9\u6848\u3002</p><p><code>attachShadow</code>\u6709\u4E24\u79CD\u6A21\u5F0F\u5206\u522B\u4E3A\uFF1A</p><ul><li>open: \u53EF\u4EE5\u7528 js \u83B7\u53D6 dom \u8282\u70B9</li><li>closed\uFF1A\u4E0D\u80FD\u7528 js \u83B7\u53D6 dom \u8282\u70B9</li></ul><h2 id="\u5B9E\u9A8C\u6027\u7684\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u9A8C\u6027\u7684\u529F\u80FD" aria-hidden="true">#</a> \u5B9E\u9A8C\u6027\u7684\u529F\u80FD</h2><ol><li>\u66FF\u6362 html, body \u4E3A div[data-qiankun=&quot;appName&quot;]</li><li>\u6240\u6709\u9009\u62E9\u5668\u524D\u9762\u52A0\u4E0A div[data-qiankun=&quot;appName&quot;]</li><li>@media \u548C@support \u91CC\u9762\u7684\u9009\u62E9\u5668\u524D\u9762\u4E5F\u5168\u90E8\u52A0\u4E0A div[data-qiankun=&quot;appName&quot;]</li></ol>`,7);function m(h,b){const e=l("ExternalLinkIcon");return o(),p("div",null,[r,n("ul",null,[n("li",null,[u,s(" \u8FD9\u79CD\u6A21\u5F0F\u4E0B qiankun \u4F1A\u4E3A\u6BCF\u4E2A\u5FAE\u5E94\u7528\u7684\u5BB9\u5668\u5305\u88F9\u4E0A\u4E00\u4E2A "),n("a",d,[s("shadow dom"),c(e)]),s(" \u8282\u70B9\uFF0C\u4ECE\u800C\u786E\u4FDD\u5FAE\u5E94\u7528\u7684\u6837\u5F0F\u4E0D\u4F1A\u5BF9\u5168\u5C40\u9020\u6210\u5F71\u54CD\u3002")]),k]),v])}const S=t(i,[["render",m],["__file","Scope CSS.html.vue"]]);export{S as default};
