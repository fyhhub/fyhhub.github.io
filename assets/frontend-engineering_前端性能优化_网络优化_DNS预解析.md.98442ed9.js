import{_ as s,o as n,c as o,Q as a}from"./chunks/framework.3d945e71.js";const h=JSON.parse('{"title":"DNS 预解析","description":"","frontmatter":{},"headers":[],"relativePath":"frontend-engineering/前端性能优化/网络优化/DNS预解析.md","filePath":"frontend-engineering/前端性能优化/网络优化/DNS预解析.md","lastUpdated":1731060708000}'),t={name:"frontend-engineering/前端性能优化/网络优化/DNS预解析.md"},l=a(`<h1 id="dns-预解析" tabindex="-1">DNS 预解析 <a class="header-anchor" href="#dns-预解析" aria-label="Permalink to &quot;DNS 预解析&quot;">​</a></h1><h2 id="回顾-dns-解析过程" tabindex="-1">回顾：DNS 解析过程 <a class="header-anchor" href="#回顾-dns-解析过程" aria-label="Permalink to &quot;回顾：DNS 解析过程&quot;">​</a></h2><p><strong>DNS</strong> ，全称 <strong>Domain Name System</strong> 。采用 <strong>client/server</strong> 模式，<strong>DNS client</strong> 发出查询请求，<strong>DNS server</strong> 响应请求。<strong>DNS client</strong> 通过查询 <strong>DNS server</strong> 获得主机的 <strong>IP 地址</strong>，进而完成后续的 <strong>TCP/IP</strong> 通信过程。</p><h3 id="dns-域名组成" tabindex="-1">DNS 域名组成 <a class="header-anchor" href="#dns-域名组成" aria-label="Permalink to &quot;DNS 域名组成&quot;">​</a></h3><p><img src="https://pic3.zhimg.com/80/v2-d5aab5cbd37ede88a27a28d165abe1fc_1440w.jpg?source=1940ef5c" alt=""></p><hr><p><img src="https://pic3.zhimg.com/80/v2-0d8ed8870fa1fc4e5f0275e08b510444_1440w.jpg?source=1940ef5c" alt=""></p><h3 id="dns-对www-baidu-com解析过程" tabindex="-1">DNS 对www.baidu.com解析过程 <a class="header-anchor" href="#dns-对www-baidu-com解析过程" aria-label="Permalink to &quot;DNS 对www.baidu.com解析过程&quot;">​</a></h3><p><img src="https://pic3.zhimg.com/80/v2-2e3c4a5086b77c9dc2fa88c55e12e689_1440w.jpg?source=1940ef5c" alt=""></p><p>以上过程都是在没有<code>浏览器缓存</code>，<code>系统缓存</code>，<code>路由器花奴才能</code>,</p><ol><li><p><strong>DNS 客户端</strong>向<strong>本地域名服务器</strong>发送请求，查询 www.baidu.com 主机的 IP 地址；</p></li><li><p>本地域名服务器查询数据库，发现没有域名为 www.baidu.com 的主机，于是将请求发送给根域名服务器；</p></li><li><p><strong>根域名服务器</strong>查询数据库，发现没有这个主机域名记录，但是根域名服务器知道 <strong>com 域名服务器</strong>可以解析这个域名，于是将<strong>com 域名服务器</strong>的 IP 地址返回给<strong>本地域名服务器</strong>；</p></li><li><p><strong>本地域名服务器</strong>向 <strong>com 域名服务器</strong>查询 www.baidu.com 主机的 IP 地址；</p></li><li><p><strong>com 域名服务器</strong>查询数据库，也没有相关记录，但是知道 baidu.com 域名服务器可以解析这个域名，于是将 baidu.com 域名服务器的 IP 地址返回给本地域名服务器；</p></li><li><p><strong>本地域名服务器</strong>再向 <strong>baidu.com 域名服务器</strong>查询 www.baidu.com 主机 IP 地址；</p></li><li><p><strong>baidu.com 域名服务器</strong>查询数据库，也没有相关记录，但是知道 <strong>www.baidu.com 域名服务器</strong>可以解析这个域名，于是将 www.baidu.com 的域名服务器 IP 地址返回给本地域名服务器；</p></li><li><p><strong>本地域名服务器</strong>向 <strong>www.baidu.com 域名服务器</strong>查询 www.baidu.com 主机的 IP 地址；</p></li><li><p><strong>www.baidu.com域名服务器</strong>查询数据库，发现有主机域名记录，于是给<strong>本地域名服务器</strong>返回 www.baidu.com 对应的 IP 地址；</p></li><li><p>最后<strong>本地域名服务器</strong>将 www.baidu.com 的 IP 地址返回给客户端，整个解析过程完成。</p></li></ol><h2 id="dns-预解析优化" tabindex="-1">DNS 预解析优化 <a class="header-anchor" href="#dns-预解析优化" aria-label="Permalink to &quot;DNS 预解析优化&quot;">​</a></h2><p><strong>DNS Prefetching 能够提前解析域名</strong>，当用户去访问该域名时就能直接获取到 ip，减少等待时间，提升用户体验</p><p><strong>如果想对页面中没有出现的域进行预获取，那么就要使用显示的 DNS Prefetch 了</strong></p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 用meta信息来告知浏览器, 当前页面要做DNS预解析 --&gt;</span></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- content=&quot;on&quot; or content=&quot;off&quot; --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">http-equiv</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;x-dns-prefetch-control&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;on&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 在页面header中使用link标签来强制对DNS预解析 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">rel</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dns-prefetch&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">href</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;//www.zhix.net&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">rel</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dns-prefetch&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">href</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;//api.share.zhix.net&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">rel</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dns-prefetch&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">href</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;//bdimg.share.zhix.net&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 用meta信息来告知浏览器, 当前页面要做DNS预解析 --&gt;</span></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- content=&quot;on&quot; or content=&quot;off&quot; --&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">http-equiv</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;x-dns-prefetch-control&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;on&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 在页面header中使用link标签来强制对DNS预解析 --&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">rel</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;dns-prefetch&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">href</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;//www.zhix.net&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">rel</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;dns-prefetch&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">href</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;//api.share.zhix.net&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">rel</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;dns-prefetch&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">href</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;//bdimg.share.zhix.net&quot;</span><span style="color:#24292E;"> /&gt;</span></span></code></pre></div><p><strong>注意：dns-prefetch 需慎用，多页面重复 DNS 预解析会增加重复 DNS 查询次数</strong></p><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p><a href="https://www.zhihu.com/question/23042131/answer/66571369" target="_blank" rel="noreferrer">DNS 解析的过程是什么，求详细的？</a></p><p><a href="https://www.cnblogs.com/goloving/p/9368965.html" target="_blank" rel="noreferrer">DNS 预解析 dns-prefetch 提升页面载入速度优化前端性能</a></p>`,19),e=[l];function p(r,c,i,E,g,d){return n(),o("div",null,e)}const u=s(t,[["render",p]]);export{h as __pageData,u as default};
